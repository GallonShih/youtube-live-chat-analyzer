# ğŸª„ Hermes

YouTube ç›´æ’­ç•™è¨€æ”¶é›†èˆ‡åˆ†æç³»çµ±

## ğŸ“‹ å°ˆæ¡ˆæ¦‚è¿°

Hermes æ˜¯ä¸€å€‹ç”¨æ–¼å³æ™‚/è¿‘å³æ™‚æ”¶é›† YouTube ç›´æ’­ç•™è¨€èˆ‡çµ±è¨ˆæ•¸æ“šçš„ç³»çµ±ï¼Œä¸¦æä¾› ETL åˆ†æèˆ‡ BI å¯è¦–åŒ–åŠŸèƒ½ã€‚

### æ ¸å¿ƒåŠŸèƒ½

- **å³æ™‚ç•™è¨€æ”¶é›†**ï¼šä½¿ç”¨ chat-downloader æ”¶é›†ç›´æ’­èŠå¤©å®¤ç•™è¨€
- **çµ±è¨ˆæ•¸æ“šè¿½è¹¤**ï¼šé€é YouTube Data API å®šæœŸç²å–è§€çœ‹æ•¸ã€æŒ‰è®šæ•¸ç­‰çµ±è¨ˆ
- **æ•¸æ“šåˆ†æ**ï¼šæ¸…æ´—ã€æ–·è©ã€è©é »åˆ†æã€æ–‡å­—é›²ç”Ÿæˆ
- **AI è¼•é‡åˆ†æ**ï¼šæ‘˜è¦èˆ‡æƒ…ç·’åˆ†æï¼ˆå¯é¸ï¼‰
- **BI å¯è¦–åŒ–**ï¼šä½¿ç”¨ Metabase é€²è¡Œæ•¸æ“šæ¢ç´¢èˆ‡è¦–è¦ºåŒ–

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

```
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   chat messages    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
YouTubeâ”‚ chat-downloaderâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   PostgreSQL   â”‚
 Live   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                   â”‚   (pg db)      â”‚
 Stream         â”‚       stats polling       â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â–¼                               â–²
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  stats snapshots        â”‚
       â”‚ YouTube Data â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚   API        â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚        ETL-Analysis         â”‚
                â”‚ (æ¸…æ´— / æ–·è© / çµ±è¨ˆ / AIåˆ†æ) â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ aggregated views
                           â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚ Metabaseâ”‚
                      â”‚   (BI)  â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æœå‹™çµ„ä»¶

1. **Worker**ï¼šç•™è¨€æ”¶é›†èˆ‡çµ±è¨ˆæ•¸æ“š polling
2. **PostgreSQL**ï¼šæ•¸æ“šå„²å­˜
3. **ETL-Analysis**ï¼šæ•¸æ“šæ¸…æ´—ã€æ–·è©ã€åˆ†æ
4. **Metabase**ï¼šBI å·¥å…·èˆ‡å¯è¦–åŒ–

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ç³»çµ±éœ€æ±‚

- Docker & Docker Compose
- æœ€å°è³‡æºï¼š2 vCPUã€4GB RAMã€20GB SSD

### ç’°å¢ƒè¨­å®š

1. è¤‡è£½ç’°å¢ƒè®Šé‡ç¯„ä¾‹ï¼š
```bash
cp .env.example .env
```

2. ç·¨è¼¯ `.env` å¡«å…¥å¿…è¦è¨­å®šï¼š
   - YouTube Data API Key
   - PostgreSQL é€£ç·šè³‡è¨Š
   - å…¶ä»–æœå‹™è¨­å®š

### å•Ÿå‹•æœå‹™

```bash
docker-compose up -d
```

### è¨ªå•æœå‹™

- Metabase: http://localhost:3000
- PostgreSQL: localhost:5432

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
hermes/
â”œâ”€â”€ worker/           # ç•™è¨€æ”¶é›† Worker
â”œâ”€â”€ etl-analysis/     # ETL åˆ†ææœå‹™
â”œâ”€â”€ database/         # è³‡æ–™åº« schema èˆ‡ migrations
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .env.example
â””â”€â”€ README.md
```

## ğŸ”§ è¨­å®šèªªæ˜

### Worker è¨­å®š

- `YOUTUBE_API_KEY`: YouTube Data API é‡‘é‘°
- `POLL_INTERVAL`: çµ±è¨ˆæ•¸æ“šè¼ªè©¢é–“éš”ï¼ˆç§’ï¼‰
- `ENABLE_BACKFILL`: æ˜¯å¦å•Ÿç”¨æ­·å²è³‡æ–™è£œæŠ“

### ETL è¨­å®š

- `ETL_INTERVAL`: ETL åŸ·è¡Œé–“éš”
- `ENABLE_AI_ANALYSIS`: æ˜¯å¦å•Ÿç”¨ AI åˆ†æ

## ğŸ“Š è³‡æ–™æµ

1. Worker æ”¶é›†ç•™è¨€ â†’ `chat_messages` è¡¨
2. Worker è¼ªè©¢çµ±è¨ˆ â†’ `stream_stats` è¡¨
3. ETL åˆ†æè™•ç† â†’ `etl_tokens`, `etl_aggregates`, `etl_insights` è¡¨
4. Metabase è®€å–å½™ç¸½è³‡æ–™ â†’ è¦–è¦ºåŒ–å‘ˆç¾

## ğŸ› ï¸ é–‹ç™¼æŒ‡å—

è«‹åƒè€ƒ [CLAUDE.md](./CLAUDE.md) äº†è§£é–‹ç™¼è¦ç¯„èˆ‡å¸¸ç”¨å‘½ä»¤ã€‚

## ğŸ“ License

MIT